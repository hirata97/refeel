# Supabaseèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€GoalCategorizationDiaryãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Supabaseèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°ãªèª¬æ˜ã¨è¨­å®šæ‰‹é †ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †)
- [èªè¨¼ã‚¹ãƒˆã‚¢](#èªè¨¼ã‚¹ãƒˆã‚¢)
- [ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¬ãƒ¼ãƒ‰](#ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¬ãƒ¼ãƒ‰)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼**: Supabase Auth
- **çŠ¶æ…‹ç®¡ç†**: Pinia (Vue 3)
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Vue 3 + TypeScript
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: Vue Router with guards

### ä¸»è¦æ©Ÿèƒ½
- âœ… ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
- âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨è‡ªå‹•æ›´æ–°
- âœ… èªè¨¼çŠ¶æ…‹ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ç®¡ç†
- âœ… ãƒ«ãƒ¼ãƒˆä¿è­·ã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- âœ… ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã®çŠ¶æ…‹å¾©å…ƒ
- âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Vue 3)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Components (Login, Register, Dashboard, etc.)             â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   useAuthStore()    â”‚â—„â”€â”¼â”€â–ºâ”‚      Vue Router Guards       â”‚â”‚
â”‚  â”‚    (Pinia)          â”‚  â”‚  â”‚   (Authentication Check)    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚             â”‚              â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Supabase Client           â”‚                                 â”‚
â”‚             â”‚              â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Authentication    â”‚â—„â”€â”¼â”€â–ºâ”‚     Database Tables         â”‚â”‚
â”‚  â”‚      Events         â”‚  â”‚  â”‚  (accounts, diaries, etc.)  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase Cloud                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   Auth Service  â”‚    â”‚   PostgreSQL    â”‚                â”‚
â”‚  â”‚                 â”‚    â”‚    Database     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. [Supabase Dashboard](https://supabase.com/dashboard) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒNew Projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š:
   - **Name**: `GoalCategorizationDiary`
   - **Database Password**: å¼·ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
   - **Region**: `Northeast Asia (Tokyo)`

### 2. èªè¨¼è¨­å®š

1. **Authentication â†’ Providers â†’ Email** ã‚’é¸æŠ
2. **ã€ŒConfirm Emailã€ã‚’ç„¡åŠ¹åŒ–** (é–‹ç™ºç’°å¢ƒç”¨)
3. **Site URL**: `http://localhost:5173` (é–‹ç™ºç”¨)
4. **Redirect URLs**: `http://localhost:5173/**`

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

**Database â†’ SQL Editor** ã§ä»¥ä¸‹ã®SQLã‚’å®Ÿè¡Œ:

```sql
-- accounts ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ
CREATE TABLE public.accounts (
  id UUID REFERENCES auth.users(id) ON DELETE CASCADE PRIMARY KEY,
  username TEXT NOT NULL,
  email TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- diaries ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ  
CREATE TABLE public.diaries (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  date DATE NOT NULL,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  mood INTEGER CHECK (mood >= 1 AND mood <= 5) DEFAULT 3,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- RLS (Row Level Security) ã‚’æœ‰åŠ¹åŒ–
ALTER TABLE public.accounts ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.diaries ENABLE ROW LEVEL SECURITY;

-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®è¨­å®š
CREATE POLICY "Users can manage own account" ON public.accounts
  USING (auth.uid() = id);

CREATE POLICY "Users can manage own diaries" ON public.diaries
  USING (auth.uid() = user_id);
```

### 4. ç’°å¢ƒå¤‰æ•°è¨­å®š

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆãƒ»æ›´æ–°:

```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_KEY=your-anon-key
```

## èªè¨¼ã‚¹ãƒˆã‚¢

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/stores/auth.ts     # ãƒ¡ã‚¤ãƒ³èªè¨¼ã‚¹ãƒˆã‚¢
src/lib/supabase.ts    # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š
src/utils/auth.ts      # èªè¨¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
```

### ä¸»è¦ãªçŠ¶æ…‹ç®¡ç†

```typescript
// èªè¨¼ã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹
interface AuthState {
  user: User | null           // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
  session: Session | null     // ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³
  loading: boolean            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
  error: string | null        // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
}

// è¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
const isAuthenticated = computed(() => !!user.value && !!session.value)
```

### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ | æˆ»ã‚Šå€¤ |
|----------|------|---------|
| `initialize()` | èªè¨¼çŠ¶æ…‹ã®åˆæœŸåŒ– | `Promise<void>` |
| `signIn(email, password)` | ãƒ­ã‚°ã‚¤ãƒ³ | `Promise<{success: boolean, user?: User, error?: string}>` |
| `signUp(email, password)` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | `Promise<{success: boolean, user?: User, error?: string}>` |
| `signOut()` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | `Promise<{success: boolean, error?: string}>` |
| `refreshSession()` | ã‚»ãƒƒã‚·ãƒ§ãƒ³æ›´æ–° | `Promise<boolean>` |
| `setupAuthListener()` | èªè¨¼ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š | `Subscription` |

## ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¬ãƒ¼ãƒ‰

### å®Ÿè£…å ´æ‰€
`src/router/index.ts`

### ä¿è­·å¯¾è±¡ãƒ«ãƒ¼ãƒˆ
```typescript
const protectedRoutes = [
  '/dashboard',
  '/diaryregister', 
  '/diaryview',
  '/diaryreport',
  '/setting',
  '/help'
]
```

### ã‚¬ãƒ¼ãƒ‰å‡¦ç†
```typescript
router.beforeEach((to, from, next) => {
  if (to.matched.some(record => record.meta.requiresAuth)) {
    const authStore = useAuthStore()
    if (!authStore.isAuthenticated) {
      next({ path: '/login', query: { redirect: to.fullPath } })
    } else {
      next()
    }
  } else {
    next()
  }
})
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### accounts ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|----|----- |------|
| id | UUID | PK, FK â†’ auth.users(id) | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| username | TEXT | NOT NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼å |
| email | TEXT | NOT NULL | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| created_at | TIMESTAMPTZ | DEFAULT now() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT now() | æ›´æ–°æ—¥æ™‚ |

### diaries ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|----|----- |------|
| id | UUID | PK, DEFAULT gen_random_uuid() | æ—¥è¨˜ID |
| user_id | UUID | FK â†’ auth.users(id), NOT NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| date | DATE | NOT NULL | æ—¥è¨˜ã®æ—¥ä»˜ |
| title | TEXT | NOT NULL | ã‚¿ã‚¤ãƒˆãƒ« |
| content | TEXT | NOT NULL | å†…å®¹ |
| mood | INTEGER | CHECK (1-5), DEFAULT 3 | æ°—åˆ†ã‚¹ã‚³ã‚¢ |
| created_at | TIMESTAMPTZ | DEFAULT now() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT now() | æ›´æ–°æ—¥æ™‚ |

## ä½¿ç”¨æ–¹æ³•

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®èªè¨¼çŠ¶æ…‹ç¢ºèª

```vue
<template>
  <div v-if="authStore.isAuthenticated">
    <p>ã‚ˆã†ã“ãã€{{ authStore.user?.email }}ã•ã‚“</p>
    <button @click="handleLogout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
  </div>
  <div v-else>
    <p>ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™</p>
  </div>
</template>

<script setup lang="ts">
import { useAuthStore } from '@/stores/auth'
import { useRouter } from 'vue-router'

const authStore = useAuthStore()
const router = useRouter()

const handleLogout = async () => {
  const result = await authStore.signOut()
  if (result.success) {
    await router.push('/login')
  }
}
</script>
```

### ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†

```typescript
const handleLogin = async () => {
  const result = await authStore.signIn(email.value, password.value)
  
  if (result.success) {
    await router.push('/dashboard')
  } else {
    console.error('Login failed:', result.error)
  }
}
```

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²å‡¦ç†

```typescript
const handleRegister = async () => {
  const result = await authStore.signUp(email.value, password.value)
  
  if (result.success && result.user) {
    // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
    const { error } = await supabase.from('accounts').insert([
      {
        id: result.user.id,
        username: username.value,
        email: email.value
      }
    ])
    
    if (!error) {
      await router.push('/dashboard')
    }
  }
}
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ã€ŒNo API key found in requestã€ã‚¨ãƒ©ãƒ¼

**åŸå› **: ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
1. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèª
2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•: `npm run dev`
3. ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢

#### 2. ã€Œemail_address_invalidã€ã‚¨ãƒ©ãƒ¼

**åŸå› **: Supabaseã§ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
1. Supabase Dashboard â†’ Authentication â†’ Providers â†’ Email
2. ã€ŒConfirm Emailã€ã‚’ç„¡åŠ¹åŒ–

#### 3. 404ã‚¨ãƒ©ãƒ¼ (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹æ™‚)

**åŸå› **: å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
1. Database â†’ SQL Editor ã§ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQLã‚’å®Ÿè¡Œ
2. RLS (Row Level Security) ãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª

#### 4. ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¬ãƒ¼ãƒ‰ã¾ãŸã¯èªè¨¼çŠ¶æ…‹ã®å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
1. é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Consoleã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
2. `authStore.isAuthenticated` ã®å€¤ã‚’ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®LocalStorageã‚’ç¢ºèª

### ãƒ‡ãƒãƒƒã‚°ç”¨ã‚³ãƒ¼ãƒ‰

é–‹ç™ºä¸­ã«èªè¨¼çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰:

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
console.log('Auth Store:', useAuthStore())
console.log('Current User:', useAuthStore().user)
console.log('Is Authenticated:', useAuthStore().isAuthenticated)
console.log('Session:', useAuthStore().session)
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### Row Level Security (RLS)

ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§RLSãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ãŠã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½:

```sql
-- ä¾‹: diaries ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒãƒªã‚·ãƒ¼
CREATE POLICY "Users can view own diaries" ON public.diaries
  FOR SELECT USING (auth.uid() = user_id);
```

### API ã‚­ãƒ¼ã®ç®¡ç†

- **anon/public key**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ä½¿ç”¨ï¼ˆå…¬é–‹å¯èƒ½ï¼‰
- **service_role key**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å°‚ç”¨ï¼ˆéå…¬é–‹ï¼‰

### æœ¬ç•ªç’°å¢ƒã§ã®è¨­å®š

1. **ãƒ¡ãƒ¼ãƒ«ç¢ºèªã‚’æœ‰åŠ¹åŒ–**
2. **é©åˆ‡ãªSite URLã¨Redirect URLsã‚’è¨­å®š**
3. **SMTPè¨­å®šã‚’æ§‹æˆ**
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®å†ç¢ºèª**

---

**æ›´æ–°æ—¥**: 2025-08-17  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**é–¢é€£Issue**: #2 èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…